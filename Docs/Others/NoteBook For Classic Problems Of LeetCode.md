# NoteBook For Classic Problems Of LeetCode 

<div align="center">
  <img src="https://raw.githubusercontent.com/JackFroster/Images/main/image/Screenshot%202023-11-17%20at%2013.04.48.png" alt="Screenshot 2023-11-17 at 13.04.48" width = "200px" align= "center"/>
</div>




> å¼•è¨€
>
> æ­¤æ–‡ç« æ˜¯ä¸ºäº†
>
> :man:ï¼š`Laplace`	:timer_clock: ï¼š`2021-11-07`  :pencil2:ï¼š`c/c++/java/python`  :gear:ï¼š[`Github`](https://github.com/JackFroster/JF-Notes)  :information_source:: [`LeetCode`](https://leetcode.cn/)  



### 1ã€å›æ–‡ä¸²é—®é¢˜

##### ï¼ˆ1ï¼‰æœ€é•¿å›æ–‡å­ä¸²ï¼ˆåŒæŒ‡é’ˆï¼‰

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s`ï¼Œæ‰¾åˆ° `s` ä¸­æœ€é•¿çš„å›æ–‡å­ä¸²ã€‚

**åŒæŒ‡é’ˆ** $O(n^2)$ 

```java
class Solution {
    public String longestPalindrome(String s) {
        // æšä¸¾æ‰€æœ‰å›æ–‡ä¸²çš„ä¸­å¿ƒ, åŒæŒ‡é’ˆ
        String res = "";
        for(int i = 0; i < s.length(); i ++ )
        {
            for(int l = i, r = i; l >= 0 && r < s.length(); l --, r ++ ) // æšä¸¾é•¿åº¦ä¸ºå¥‡æ•°çš„å›æ–‡ä¸²
                if(s.charAt(l) != s.charAt(r)) break;
                else res = res.length() >= (r - l + 1) ? res : s.substring(l, r + 1);
   
            for(int l = i, r = i + 1; l >= 0 && r < s.length(); l --, r ++ ) // æšä¸¾é•¿åº¦ä¸ºå¶æ•°çš„å›æ–‡ä¸²
                if(s.charAt(l) != s.charAt(r)) break;
                else res = res.length() >= (r - l + 1) ? res : s.substring(l, r + 1);
        }

        return res;
    }
}
```

##### ï¼ˆ2ï¼‰å›æ–‡å­å­—ç¬¦ä¸²çš„ä¸ªæ•° ï¼ˆçº¿æ€§ DPï¼‰

**é—®é¢˜**

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² `s` ï¼Œè¯·è®¡ç®—è¿™ä¸ªå­—ç¬¦ä¸²ä¸­æœ‰å¤šå°‘ä¸ªå›æ–‡å­å­—ç¬¦ä¸²ã€‚

å…·æœ‰ä¸åŒå¼€å§‹ä½ç½®æˆ–ç»“æŸä½ç½®çš„å­ä¸²ï¼Œå³ä½¿æ˜¯ç”±ç›¸åŒçš„å­—ç¬¦ç»„æˆï¼Œä¹Ÿä¼šè¢«è§†ä½œä¸åŒçš„å­ä¸²ã€‚

**æ³¨æ„** 

- `1 <= s.length <= 1000`
- `s` ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ

**æ€è·¯** 

æšä¸¾æ¯ä¸€ä¸ªå­—ç¬¦ä¸²åˆ¤æ–­å…¶æ˜¯å¦æ˜¯å›æ–‡ä¸²

ä¾æ®ä¹‹å‰æ±‚è¿‡çš„å­—ç¬¦ä¸²æ¥åˆ¤æ–­å½“å‰çš„å­—ä¸²æ˜¯å¦æ˜¯å›æ–‡ä¸²

**çº¿æ€§ DP** $O(n^2)$

```java
class Solution {
    public int countSubstrings(String s) {
        int n = s.length();
        boolean[][] f = new boolean[n + 10][n + 10]; // çŠ¶æ€f[i][j]è¡¨ç¤ºs(i,j)æ˜¯å›æ–‡å­—ç¬¦
        char[] str = s.toCharArray();
        
        for(int i = 0; i < n; i ++) f[i][i] = true; // åˆå§‹åŒ–çŠ¶æ€æ•°ç»„, å•ä¸ªå­—ç¬¦ä¹Ÿæ˜¯å›æ–‡ä¸²

        int cnt = n; // å•ä¸ªå­—ç¬¦ä¹Ÿæ˜¯å›æ–‡ä¸²
        for(int i = n - 1; i >= 0; i -- )
            for(int j = i + 1; j < n; j ++ ) {
                if(i + 1 > j - 1) f[i][j] = str[i] == str[j]; // æƒ…å†µä¸€: aa
                else f[i][j] = f[i + 1][j - 1] && str[i] == str[j]; // æƒ…å†µäºŒ aba

                if(f[i][j]) cnt ++ ; // s(i,j)æ˜¯å›æ–‡ä¸²
            }
        return cnt;
    }
}
```

**ä»£ç ä¼˜åŒ–ç‰ˆ** 

```java
class Solution {
    public int countSubstrings(String s) {
        int n = s.length();
        boolean[][] f = new boolean[n + 10][n + 10]; // çŠ¶æ€f[i][j]è¡¨ç¤ºs(i,j)æ˜¯å›æ–‡å­—ç¬¦
        
        for(int i = 0; i < n; i ++) Arrays.fill(f[i], true); // åˆå§‹åŒ–çŠ¶æ€æ•°ç»„, å•ä¸ªå­—ç¬¦ä¹Ÿæ˜¯å›æ–‡ä¸²

        int cnt = n; // å•ä¸ªå­—ç¬¦ä¹Ÿæ˜¯å›æ–‡ä¸²
        for(int i = n - 1; i >= 0; i -- )
            for(int j = i + 1; j < n; j ++ ) {
                f[i][j] = f[i + 1][j - 1] && s.charAt(i) == s.charAt(j); // æƒ…å†µäºŒ aba
                if(f[i][j]) cnt ++ ; // s(i,j)æ˜¯å›æ–‡ä¸²
            }
        return cnt;
    }
}
```

**ç”¨é€”** 

- æ±‚å›æ–‡ä¸²çš„ä¸ªæ•°
- é¢„å¤„ç†å‡ºæ‰€æœ‰çš„å›æ–‡ä¸²

##### ï¼ˆ3ï¼‰131. åˆ†å‰²å›æ–‡ä¸² Iï¼ˆå›æº¯+è®°å¿†åŒ–æœç´¢ï¼‰

**é—®é¢˜**

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s`ï¼Œè¯·ä½ å°† `s` åˆ†å‰²æˆä¸€äº›å­ä¸²ï¼Œä½¿**æ¯ä¸ªå­ä¸²**éƒ½æ˜¯ **å›æ–‡ä¸²** ã€‚è¿”å› `s` æ‰€æœ‰å¯èƒ½çš„åˆ†å‰²æ–¹æ¡ˆã€‚

**å›æ–‡ä¸²** æ˜¯æ­£ç€è¯»å’Œåç€è¯»éƒ½ä¸€æ ·çš„å­—ç¬¦ä¸²ã€‚

æ³¨æ„

- `1 <= s.length <= 16`
- `s` ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ

**æ€è·¯** 

é‡‡ç”¨**å›æº¯**çš„æ–¹å¼ï¼Œæœ¬é¢˜çš„**é€’å½’æ ‘æ¨¡**å‹æ˜¯ä¸€æ£µ**å¤šå‰æ ‘** 

<img src="https://raw.githubusercontent.com/JackFroster/Images/main/image/202208221821153.png" alt="image.png" width="700px" />

åœ¨é€’å½’ä¹‹å‰**é¢„å¤„ç†**å‡º**å›æ–‡ä¸²æ•°ç»„**

**ä»£ç **

```java
class Solution {

    final int N = 20;
    boolean[][] f = new boolean[N][N]; // å›æ–‡ä¸²æ•°ç»„, f[i][j]ä¸ºtrueè¡¨ç¤ºs(i~j)æ˜¯å›æ–‡ä¸², ä¸ºfalseè¡¨ç¤ºs(i~j)ä¸æ˜¯å›æ–‡ä¸²
    List<List<String>> solutions = new ArrayList<>();

    public void dfs(String u, int st, List<String> ans) { // uæ˜¯å¾…åˆ†å‰²çš„å­—ç¬¦ä¸², stæ˜¯uç›¸å¯¹äºåŸå­—ç¬¦ä¸²çš„èµ·å§‹ä½ç½®
        if(u == null || "".equals(u)) { // æšä¸¾åˆ°æœç´¢æ ‘çš„å¶å­ç»“ç‚¹,æ‰¾åˆ°ä¸€ç§åˆ†å‰²æ–¹æ¡ˆ, uæ˜¯ç©ºå­—ç¬¦ä¸²
            solutions.add(new ArrayList<>(ans));
            return ;
        }

        for(int i = 0; i < u.length(); i ++ ) { // æšä¸¾å­—ç¬¦ä¸²uçš„æ‰€æœ‰åˆ†å‰²ä½ç½®
            String a = null, b = null;
            // åˆ†åˆ«æˆªå–aå’Œb
            a = u.substring(0, i + 1);
            if(i + 1 < u.length()) b = u.substring(i + 1, u.length());
            
            if(f[st][st + i]) ans.add(a); // aæ˜¯å›æ–‡ä¸²
            else continue; // aä¸æ˜¯å›æ–‡ä¸², åˆ™è¿›è¡Œå‰ªææ“ä½œ

            dfs(b, st + i + 1, ans);
            ans.remove(ans.size() - 1); // æ¢å¤ç°åœº
        }       
    }

    public List<List<String>> partition(String s) {
        int n = s.length();
        for(int i  = 0; i < n; i ++ ) Arrays.fill(f[i], true);

        for (int i = n - 1; i >= 0; i --) // é¢„å¤„ç†å›æ–‡ä¸²æ•°ç»„f
            for (int j = i + 1; j < n; j ++ ) 
                f[i][j] = (s.charAt(i) == s.charAt(j)) && f[i + 1][j - 1];

        dfs(s, 0, new ArrayList<>());
        return solutions;
    }
}
```

##### ï¼ˆ4ï¼‰132. åˆ†å‰²å›æ–‡ä¸² IIï¼ˆçº¿æ€§ DPï¼‰

**é—®é¢˜** 

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s`ï¼Œè¯·ä½ å°† `s` åˆ†å‰²æˆä¸€äº›å­ä¸²ï¼Œä½¿æ¯ä¸ªå­ä¸²éƒ½æ˜¯å›æ–‡ã€‚

è¿”å›ç¬¦åˆè¦æ±‚çš„ **æœ€å°‘åˆ†å‰²æ¬¡æ•°** ã€‚

æ³¨æ„

- `1 <= s.length <= 2000`
- `s` ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ

**æ€è·¯**

é¦–å…ˆæƒ³åˆ°å’Œ [åˆ†å‰²å›æ–‡ä¸²â… ](https://leetcode.cn/problems/palindrome-partitioning/) ä¸€æ ·çš„æš´åŠ›æ–¹æ³•ï¼Œéå†å‡ºæ‰€æœ‰åˆ†å‰²çš„å¯èƒ½ï¼Œè¿”å›æœ€å°åˆ†å‰²å³å¯ã€‚

ä½†æ˜¯æœ¬é¢˜ä¸ç”¨æ±‚å‡ºå…·ä½“çš„æ–¹æ¡ˆæ•°ï¼Œåªéœ€è¦**æœ€å°åˆ†å‰²æ¬¡æ•°**ï¼Œå¯ä»¥ä½¿ç”¨**åŠ¨æ€è§„åˆ’**æ¥æ±‚è§£å­é—®é¢˜ã€‚

$f[i]$ è¡¨ç¤ºåœ¨åŒºé—´ $[0, i)$ å†…çš„å­—ç¬¦ä¸²çš„æœ€å°åˆ†å‰²æ¬¡æ•°ï¼Œé‚£ä¹ˆå¦‚æœ $[j, i-1]$ æ˜¯ä¸€ä¸ªå›æ–‡ä¸²ï¼Œåˆ™ $f[i] = min(f[i], f[j] + 1)$

åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå› ä¸ºæœ€å·®æƒ…å†µä¸‹éœ€è¦å°†å­—ç¬¦ä¸²å…¨éƒ¨åˆ†å‰²æˆå•ä¸ªå­—ç¬¦ï¼Œéœ€è¦åˆ†å‰² $n-1$ æ¬¡ï¼Œ è€Œ $f[0]$ å³ç©ºä¸² ä¸éœ€è¦åˆ†å‰²ï¼Œåˆå§‹åŒ–$f[0] = 0$

å¯»æ‰¾å›æ–‡ä¸²çš„è¿‡ç¨‹ï¼Œå¯ä»¥ç”¨**äºŒç»´åŠ¨è§„**å»æ‰¾ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨**ä¸­å¿ƒæ‰©å±•**æ³•å»æ‰¾ï¼Œåªéœ€è¦åœ¨æ‰¾çš„è¿‡ç¨‹ä¸­ä¸æ–­æ›´æ–° $f[i]$ å³å¯ã€‚

<img src="https://raw.githubusercontent.com/JackFroster/Images/main/image/202208221844337.png" alt="image-20220822184415268" width="800px" />

**ä»£ç ** $O(n^2)$ 

```java
class Solution {
    public int minCut(String s) {
        int n = s.length();
        int[] f = new int[n + 1];
        boolean [][] symmetry = new boolean[n + 1][n + 1];//ä¸ºtrueè¡¨ç¤ºs(i~j)æ˜¯å›æ–‡ä¸²,ä¸ºfalseè¡¨ç¤ºs(i~j)ä¸æ˜¯å›æ–‡ä¸²

        for(int i = 1; i <= n; i ++ ) f[i] = i - 1; // åˆå§‹åŒ–, å‰iä¸ªå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²çš„æœ€å¤šåˆ†å‰²æ¬¡æ•°
        for(int i  = 0; i < n; i ++ ) Arrays.fill(symmetry[i], true);

        for (int i = n - 1; i >= 0; i --) // é¢„å¤„ç†symmetryæ•°ç»„
            for (int j = i + 1; j < n; j ++ ) 
                symmetry[i][j] = (s.charAt(i) == s.charAt(j)) && symmetry[i + 1][j - 1];

        for(int i = 1; i <= n; i ++ ) // çº¿æ€§ DP
            for(int j = 0; j < i; j ++ ) // æšä¸¾æœ€åä¸€æ¬¡çš„åˆ†å‰²ä½ç½®
                if(symmetry[j][i - 1]) // s(j, i - 1) æ˜¯å›æ–‡ä¸²
                    if(j > 0) f[i] = Math.min(f[i], f[j] + 1);
                    else f[i] = Math.min(f[i], 0); 
                    
        return f[n];    
    }
}
```



### 2ã€è‚¡ç¥¨ä¹°å–é—®é¢˜

| æ¨¡å‹                   | ç‰¹ç‚¹                                                   | çŠ¶æ€è¡¨ç¤º                                                     |
| ---------------------- | ------------------------------------------------------ | ------------------------------------------------------------ |
| ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº I   | ä¹°å…¥å’Œå–å‡º**ä¸€æ¬¡**è‚¡ç¥¨                                 | $f[i]$ è¡¨ç¤ºå‰$i$å¤©ä¸­æ‰€æœ‰ä¹°å–è‚¡ç¥¨çš„æ–¹æ¡ˆçš„é›†åˆ                 |
| ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II  | **å¤šæ¬¡**ä¹°å…¥å–å‡ºä¸€åªè‚¡ç¥¨ï¼Œåœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ | $f[i][j]$ è€ƒè™‘å‰ $i$ å¤©çš„è‚¡å¸‚ï¼Œç¬¬ $i$ å¤©æŒè‚¡çŠ¶æ€ä¸º $j$çš„æ‰€æœ‰æ–¹æ¡ˆçš„é›†åˆ |
| ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº III | æœ€å¤šå¯ä»¥å®Œæˆ**ä¸¤ç¬”**äº¤æ˜“                               |                                                              |



##### ï¼ˆ1ï¼‰ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº Iï¼ˆçº¿æ€§DPï¼‰

**é—®é¢˜**

ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $N(1â‰¤Nâ‰¤10^5)$ çš„æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„ç¬¬ $i$ ä¸ªæ•°å­—è¡¨ç¤ºä¸€ä¸ªç»™å®šè‚¡ç¥¨åœ¨ç¬¬ $i$ å¤©çš„ä»·æ ¼ã€‚

å¦‚æœä½ æœ€å¤š**åªå…è®¸å®Œæˆä¸€ç¬”äº¤æ˜“**ï¼ˆå³ä¹°å…¥å’Œå–å‡ºä¸€æ”¯è‚¡ç¥¨ï¼‰ï¼Œè®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„**æœ€å¤§åˆ©æ¶¦**ã€‚

æ³¨æ„ï¼šä½ ä¸èƒ½åœ¨ä¹°å…¥è‚¡ç¥¨å‰å–å‡ºè‚¡ç¥¨ã€‚

**æ€è·¯**

<img src="https://raw.githubusercontent.com/JackFroster/Images/main/image/202207181534077.png" alt="image-20220718153409026" width="650px" />

**çº¿æ€§DP** $O(N)$

```java
Scanner sc = new Scanner(System.in);

final int N = 100010;
int[] f = new int[N]; // f[i] è¡¨ç¤ºå‰iå¤©æ‰€æœ‰ä¹°å–è‚¡ç¥¨çš„æ–¹æ¡ˆçš„é›†åˆ, å€¼è¡¨ç¤ºæ‰€æœ‰æ–¹æ¡ˆçš„æœ€å¤§åˆ©æ¶¦
int[] prices = new int[N];

int minimum = 0x3f3f3f3f, n = sc.nextInt();

for(int i = 1; i <= n; i ++ )
{
    prices[i] = sc.nextInt();
    f[i] = Math.max(f[i - 1], prices[i] - minimum);
    minimum = Math.min(minimum, prices[i]);
}

System.out.println(f[n]);
```

##### ï¼ˆ2ï¼‰ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IIï¼ˆçŠ¶æ€æœºDP/è´ªå¿ƒï¼‰

**é—®é¢˜**

ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $N(1â‰¤Nâ‰¤10^5)$ çš„æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„ç¬¬ $i$ ä¸ªæ•°å­—è¡¨ç¤ºä¸€ä¸ªç»™å®šè‚¡ç¥¨åœ¨ç¬¬ $i$ å¤©çš„ä»·æ ¼ã€‚

è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„**æœ€å¤§åˆ©æ¶¦**ã€‚ä½ å¯ä»¥**å°½å¯èƒ½åœ°å®Œæˆæ›´å¤šçš„äº¤æ˜“**ï¼ˆå¤šæ¬¡ä¹°å–ä¸€æ”¯è‚¡ç¥¨ï¼‰ã€‚

æ³¨æ„ï¼šä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚

**æ€è·¯**

**çŠ¶æ€æœºDP**

å®šä¹‰çŠ¶æ€

ç”¨çŠ¶æ€ $0$ è¡¨ç¤ºæœªæŒè‚¡ï¼Œè½¬æ€ $1$ è¡¨ç¤ºæŒè‚¡ï¼ŒçŠ¶æ€ä¹‹é—´çš„å…³ç³»å¦‚ä¸‹ï¼š

<img src="https://raw.githubusercontent.com/JackFroster/Images/main/image/202207181538931.jpeg" alt="IMG_4E31C78D0C18-1.jpeg" width="450px" />

åŠ¨æ€è§„åˆ’

<img src="https://raw.githubusercontent.com/JackFroster/Images/main/image/202207181539054.jpeg" alt="IMG_7844DAF97668-1.jpeg" width="670px" />



**çŠ¶æ€æœºæ¨¡å‹ DP** $O(N)$

```java
Scanner sc = new Scanner(System.in);

final int N = 100010, INF = 0x3f3f3f3f;
int[][] f = new int[N][2]; // f[i][j]è¡¨ç¤ºè€ƒè™‘å‰iå¤©çš„è‚¡ç¥¨, ä¸”ç¬¬iæŒæœ‰è‚¡ç¥¨çš„çŠ¶æ€æ˜¯j(jä¸º0è¡¨ç¤ºä¸æŒè‚¡, jä¸º1è¡¨ç¤ºæŒè‚¡)
int[] prices = new int[N];
int n = sc.nextInt();

f[0][1] = -INF; // åˆå§‹åŒ–ä¸åˆæ³•æƒ…å†µ
for(int i = 1; i <= n; i ++ )
{
    prices[i] = sc.nextInt();
    f[i][0] = Math.max(f[i - 1][0], f[i - 1][1] + prices[i]); // max(ä¸æŒè‚¡, å–å‡º)
    f[i][1] = Math.max(f[i - 1][1], f[i - 1][0] - prices[i]); // max(æŒè‚¡, ä¹°å…¥)
}

System.out.println(f[n][0]);
```

**è´ªå¿ƒ** $O(N)$

è‚¡ç¥¨ä¹°å–ç­–ç•¥ï¼š

- å•ç‹¬äº¤æ˜“æ—¥ï¼šè®¾ä»Šå¤©çš„è‚¡ç¥¨ä»·æ ¼æ˜¯ $p_1$ï¼Œæ˜å¤©çš„ä»·æ ¼æ˜¯ $p_2$ï¼Œä»Šå¤©ä¹°å…¥ï¼Œæ˜å¤©å–å‡ºå¯ä»¥èµšå–çš„é‡‘é¢æ˜¯ $p_2-p_1$ã€‚ï¼ˆè´Ÿå€¼è¡¨ç¤ºäºæŸï¼‰
- è¿ç»­ä¸Šæ¶¨äº¤æ˜“æ—¥ï¼šè®¾æ­¤è¿ç»­ä¸Šæ¶¨äº¤æ˜“æ—¥è‚¡ç¥¨ä»·æ ¼åˆ†åˆ«ä¸º $p_1,p_2,...,p_n$ã€‚åˆ™ç¬¬ä¸€å¤©ä¹°å…¥ï¼Œæœ€åä¸€å¤©å–å‡ºçš„æ”¶ç›Šæœ€å¤§ï¼Œå³$p_n-p_1$ã€‚ç­‰ä»·äºæ¯å¤©éƒ½ä¹°å…¥å’Œå–å‡ºè‚¡ç¥¨ï¼Œå³ $(p_1-p_2) + (p_2-p_3)+...+(p_{n-2}-p_{n-1})+(p_{n-1}-p_n)$ã€‚
- è¿ç»­ä¸‹é™äº¤æ˜“æ—¥ï¼šä¸ä¹°ä¸å–æ”¶ç›Šæœ€å¤§ï¼Œå³ä¸ä¼šäºæŸã€‚

è´ªå¿ƒæ€æƒ³ï¼šéå†æ•´ä¸ªè‚¡ç¥¨äº¤æ˜“æ—¥ä»·æ ¼ï¼Œæ‰€æœ‰è¿ç»­ä¸Šæ¶¨äº¤æ˜“æ—¥éƒ½è¿›è¡Œä¹°å–è‚¡ç¥¨ï¼ˆå°½å¯èƒ½çš„èµšå–åˆ©æ¶¦ï¼‰ï¼Œæ‰€æœ‰è¿ç»­ä¸‹é™äº¤æ˜“æ—¥éƒ½ä¸è¿›è¡Œä¹°å–ï¼ˆèƒ½ä¸äºé’±å°±ä¸è¦äºé’±ï¼‰ã€‚

- è®¾$temp$ä¸ºç¬¬$i-1$å¤©ä¹°å…¥ï¼Œç¬¬$i$å¤©å–å‡ºçš„åˆ©æ¶¦ï¼Œå³ $temp=prices[i-1]-prices[i]$ã€‚
- å¦‚æœ $temp>0$ï¼Œå³**å½“å‰äº¤æ˜“çš„åˆ©æ¶¦ä¸ºæ­£ï¼Œåˆ™å°† $temp$åŠ åˆ°ç´¯ç§¯æ€»çš„åˆ©æ¶¦ $res$ä¸­**ï¼›å¦åˆ™ï¼Œå°±è·³è¿‡æ­¤æ¬¡äº¤æ˜“ï¼ˆå› ä¸ºè¿™æ¬¡äº¤æ˜“ä¼šæœ‰äºæŸï¼‰ã€‚

<img src="https://raw.githubusercontent.com/JackFroster/Images/main/image/%E6%88%AA%E5%B1%8F2023-07-12%2000.21.21.png" alt="æˆªå±2023-07-12 00.21.21" style="zoom:50%;" />

```java
class Solution {
    public int maxProfit(int[] prices) {
        int res = 0;
        for(int i = 1; i < prices.length; i ++)
            res += Math.max(0, prices[i] - prices[i - 1]);
        return res;
    }
}
```



##### ï¼ˆ3ï¼‰ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IIIï¼ˆçŠ¶æ€æœºDPï¼‰

**é—®é¢˜** 

ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $N(1â‰¤Nâ‰¤10^5)$ çš„æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„ç¬¬ $i$ ä¸ªæ•°å­—è¡¨ç¤ºä¸€ä¸ªç»™å®šè‚¡ç¥¨åœ¨ç¬¬ $i$ å¤©çš„ä»·æ ¼ã€‚

è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„**æœ€å¤§åˆ©æ¶¦**ã€‚ä½ **æœ€å¤šå¯ä»¥å®Œæˆä¸¤ç¬”äº¤æ˜“**ã€‚

æ³¨æ„: ä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚

**æ€è·¯** 

å®šä¹‰çŠ¶æ€

<img src="https://raw.githubusercontent.com/JackFroster/Images/main/image/202207181538931.jpeg" alt="IMG_4E31C78D0C18-1.jpeg" width="450px" />

æ­¤é—®é¢˜æ˜¯`ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII`çš„ä¸€èˆ¬åŒ–é—®é¢˜

å®šä¹‰**ä¹°å…¥è‚¡ç¥¨çš„æ—¶å€™ç®—ä½œä¸€æ¬¡äº¤æ˜“**

<img src="https://raw.githubusercontent.com/JackFroster/Images/main/image/202207181634361.png" alt="image-20220718163431311" width="700px" />

**çŠ¶æ€æœºæ¨¡å‹ DP** $O(NM)$

```java
Scanner sc = new Scanner(System.in);
final int N = 100010, M = 3, INF = 0x3f3f3f3f;

int[][][] f = new int[N][M][2]; // f[i][j][k] è¡¨ç¤ºè€ƒè™‘å‰iå¤©çš„è‚¡å¸‚, ä¸”å‰iå¤©è¿›è¡Œäº†jæ¬¡äº¤æ˜“, ç¬¬iå¤©çš„æŒè‚¡çŠ¶æ€ä¸ºk
int[] prices = new int[N];
int n = sc.nextInt();

for(int i = 1; i <= n; i ++ ) prices[i] = sc.nextInt();

for(int j = 0; j <= 2; j ++ ) f[0][j][1] = -INF; // åˆå§‹åŒ–ä¸åˆæ³•æƒ…å†µ

for(int i = 1; i <= n; i ++ )
    for(int j = 1; j <= 2; j ++ )
    {
        f[i][j][0] = Math.max(f[i - 1][j][0], f[i - 1][j][1] + prices[i]); // max(ä¸æŒè‚¡, å–å‡º)
        f[i][j][1] = Math.max(f[i - 1][j][1], f[i - 1][j - 1][0] - prices[i]); // max(æŒè‚¡, ä¹°å…¥)
    }
    
System.out.println(f[n][2][0]);
```

##### ï¼ˆ4ï¼‰ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IVï¼ˆæ»šåŠ¨æ•°ç»„ä¼˜åŒ–+çŠ¶æ€æœºDPï¼‰

**é—®é¢˜**

ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $N$ ($1â‰¤Nâ‰¤10^5$) çš„æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„ç¬¬ $i$ ä¸ªæ•°å­—è¡¨ç¤ºä¸€ä¸ªç»™å®šè‚¡ç¥¨åœ¨ç¬¬ $i$ å¤©çš„ä»·æ ¼ã€‚

è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„**æœ€å¤§åˆ©æ¶¦**ï¼Œä½ **æœ€å¤šå¯ä»¥å®Œæˆ $k$($1â‰¤kâ‰¤100$) ç¬”äº¤æ˜“**ã€‚

æ³¨æ„ï¼šä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚ä¸€æ¬¡ä¹°å…¥å–å‡ºåˆä¸ºä¸€ç¬”äº¤æ˜“ã€‚

**æ€è·¯**

å®šä¹‰çŠ¶æ€

<img src="https://raw.githubusercontent.com/JackFroster/Images/main/image/202207181538931.jpeg" alt="IMG_4E31C78D0C18-1.jpeg" width="450px" />

æ­¤é—®é¢˜æ˜¯`ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºIII`çš„æ¨å¹¿

å®šä¹‰ä¹°å…¥è‚¡ç¥¨çš„æ—¶å€™ç®—ä½œä¸€æ¬¡äº¤æ˜“

<img src="https://raw.githubusercontent.com/JackFroster/Images/main/image/202207181634361.png" alt="image-20220718163431311" width="700px" />

**çŠ¶æ€æœºæ¨¡å‹ DP** $O(NM)$ 

```java
Scanner sc = new Scanner(System.in);
final int N = 100010, M = 110, INF = 0x3f3f3f3f;       
int[][][] f = new int[N][M][2]; // f[i][j][k] è¡¨ç¤ºè€ƒè™‘å‰iå¤©çš„è‚¡å¸‚, ä¸”å‰iå¤©è¿›è¡Œäº†jæ¬¡äº¤æ˜“, ç¬¬iå¤©çš„æŒè‚¡çŠ¶æ€ä¸ºk
int[] prices = new int[N];
int n = sc.nextInt(), m = sc.nextInt();

for(int i = 1; i <= n; i ++ ) prices[i] = sc.nextInt();
for(int j = 0; j <= m; j ++ ) f[0][j][1] = -INF; // åˆå§‹åŒ–ä¸åˆæ³•æƒ…å†µ

for(int i = 1; i <= n; i ++ )
    for(int j = 1; j <= m; j ++ )
    {
        f[i][j][0] = Math.max(f[i - 1][j][0], f[i - 1][j][1] + prices[i]); // max(ä¸æŒè‚¡, å–å‡º)
        f[i][j][1] = Math.max(f[i - 1][j][1], f[i - 1][j - 1][0] - prices[i]); // max(æŒè‚¡, ä¹°å…¥)
    }
    
System.out.println(f[n][m][0]);
```

**æ»šåŠ¨æ•°ç»„ä¼˜åŒ–** $O(M)$

```java
Scanner sc = new Scanner(System.in);
final int N = 100010, M = 110, INF = 0x3f3f3f3f;
int[][] f = new int[M][2]; // f[i][j][k] è¡¨ç¤ºè€ƒè™‘å‰iå¤©çš„è‚¡å¸‚, ä¸”å‰iå¤©è¿›è¡Œäº†jæ¬¡äº¤æ˜“, ç¬¬iå¤©çš„æŒè‚¡çŠ¶æ€ä¸ºk
int[] prices = new int[N];
int n = sc.nextInt(), m = sc.nextInt();

for(int i = 1; i <= n; i ++ ) prices[i] = sc.nextInt();
for(int j = 0; j <= m; j ++ ) f[j][1] = -INF; // åˆå§‹åŒ–ä¸åˆæ³•æƒ…å†µ

for(int i = 1; i <= n; i ++ )
    for(int j = m; j >= 1; j -- )
    {
        f[j][0] = Math.max(f[j][0], f[j][1] + prices[i]); // max(ä¸æŒè‚¡, å–å‡º)
        f[j][1] = Math.max(f[j][1], f[j - 1][0] - prices[i]); // max(æŒè‚¡, ä¹°å…¥)
    }
    
System.out.println(f[m][0]);
```



##### ï¼ˆ5ï¼‰ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºï¼ˆå«å†·å†»æœŸï¼‰ Vï¼ˆçŠ¶æ€æœºDPï¼‰

**é—®é¢˜**

ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $N(1â‰¤Nâ‰¤10^5)$ çš„æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„ç¬¬ $i$ ä¸ªæ•°å­—è¡¨ç¤ºä¸€ä¸ªç»™å®šè‚¡ç¥¨åœ¨ç¬¬ $i$ å¤©çš„ä»·æ ¼ã€‚

è®¾è®¡ä¸€ä¸ªç®—æ³•è®¡ç®—å‡º**æœ€å¤§åˆ©æ¶¦**ã€‚åœ¨æ»¡è¶³ä»¥ä¸‹çº¦æŸæ¡ä»¶ä¸‹ï¼Œä½ å¯ä»¥**å°½å¯èƒ½åœ°å®Œæˆæ›´å¤šçš„äº¤æ˜“**ï¼ˆå¤šæ¬¡ä¹°å–ä¸€æ”¯è‚¡ç¥¨ï¼‰:

- ä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚
- å–å‡ºè‚¡ç¥¨åï¼Œä½ æ— æ³•åœ¨ç¬¬äºŒå¤©ä¹°å…¥è‚¡ç¥¨ (å³**å†·å†»æœŸ**ä¸º 1 å¤©)ã€‚

**æ€è·¯**

å®šä¹‰çŠ¶æ€ï¼šçŠ¶æ€0è¡¨ç¤ºä¸æŒè‚¡, çŠ¶æ€1è¡¨ç¤ºæŒè‚¡ï¼ŒçŠ¶æ€2è¡¨ç¤ºå†·å†»æœŸ

<img src="https://raw.githubusercontent.com/JackFroster/Images/main/image/202207182022433.png" alt="image-20220718202220354" width="450px" />

**åŠ¨æ€è§„åˆ’**

<img src="https://raw.githubusercontent.com/JackFroster/Images/main/image/202207182019475.png" alt="image-20220718201959407" width="700px" />

**çŠ¶æ€æœºæ¨¡å‹ DP** $O(N)$

```java
Scanner sc = new Scanner(System.in);
final int N = 100010, INF = 0x3f3f3f3f;
int[][] f = new int[N][3]; // f[i][j]è¡¨ç¤ºè€ƒè™‘å‰iå¤©çš„è‚¡å¸‚, ä¸”ç¬¬iå¤©çš„æŒè‚¡çŠ¶æ€æ˜¯j
int[] prices = new int[N];

int n = sc.nextInt();

for(int i = 1; i <= n; i ++ ) prices[i] = sc.nextInt();
f[0][1] = -INF;

for(int i = 1; i <= n; i ++ )
{
    f[i][0] = Math.max(f[i - 1][0], f[i - 1][2]);
    f[i][1] = Math.max(f[i - 1][1], f[i - 1][0] - prices[i]);
    f[i][2] = f[i - 1][1] + prices[i];
}

System.out.println(Math.max(f[n][0], f[n][2]));
```

##### ï¼ˆ6ï¼‰ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºï¼ˆå«æ‰‹ç»­è´¹ï¼‰ VIï¼ˆçŠ¶æ€æœºDPï¼‰

**é—®é¢˜**

ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $N(1â‰¤Nâ‰¤10^5)$ çš„æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„ç¬¬ $i$ ä¸ªæ•°å­—è¡¨ç¤ºä¸€ä¸ªç»™å®šè‚¡ç¥¨åœ¨ç¬¬ $i$ å¤©çš„ä»·æ ¼ï¼Œå†ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•° $f$ï¼Œè¡¨ç¤ºäº¤æ˜“è‚¡ç¥¨çš„æ‰‹ç»­è´¹ç”¨ã€‚

è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„**æœ€å¤§åˆ©æ¶¦**ã€‚ä½ å¯ä»¥**æ— é™æ¬¡åœ°å®Œæˆäº¤æ˜“**ï¼Œä½†æ˜¯ä½ æ¯æ¬¡äº¤æ˜“éƒ½éœ€è¦æ”¯ä»˜**æ‰‹ç»­è´¹**ã€‚

æ³¨æ„: ä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚

**çŠ¶æ€æœºæ¨¡å‹ DP** $O(N)$ 

```java
Scanner sc = new Scanner(System.in);
final int N = 100010, INF = 0x3f3f3f3f;
int[][] f = new int[N][2]; // f[i][j]è¡¨ç¤ºè€ƒè™‘å‰iå¤©çš„è‚¡å¸‚, ä¸”ç¬¬iå¤©çš„æŒè‚¡çŠ¶æ€æ˜¯j
int[] prices = new int[N];

int n = sc.nextInt(), fee = sc.nextInt();

for(int i = 1; i <= n; i ++ ) prices[i] = sc.nextInt();

f[0][1] = -INF; // åˆå§‹åŒ–ä¸åˆæ³•çš„æƒ…å†µ

for(int i = 1; i <= n; i ++ )
{
    f[i][0] = Math.max(f[i - 1][0], f[i - 1][1] + prices[i]);
    f[i][1] = Math.max(f[i - 1][1], f[i - 1][0] - prices[i] - fee);
}

System.out.println(f[n][0]);
```

### 3ã€æ‰“å®¶åŠ«èˆ

<img src="https://raw.githubusercontent.com/JackFroster/Images/main/image/202207201701285.png" alt="æ‰“å®¶åŠ«èˆæ€»ç»“.png" width="700px" />

##### ï¼ˆ1ï¼‰æ‰“å®¶åŠ«èˆ Iï¼ˆçº¿æ€§DPï¼‰

**é—®é¢˜**

ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°å·ï¼Œè®¡åˆ’å·çªƒæ²¿è¡—çš„æˆ¿å±‹ã€‚æ¯é—´æˆ¿å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ï¼Œå½±å“ä½ å·çªƒçš„å”¯ä¸€åˆ¶çº¦å› ç´ å°±æ˜¯**ç›¸é‚»çš„æˆ¿å±‹**è£…æœ‰ç›¸äº’è¿é€šçš„**é˜²ç›—ç³»ç»Ÿ**ï¼Œå¦‚æœä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹åœ¨åŒä¸€æ™šä¸Šè¢«å°å·é—¯å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ¥è­¦ã€‚

ç»™å®šä¸€ä¸ªä»£è¡¨æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„ï¼Œè®¡ç®—ä½ **ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®**çš„æƒ…å†µä¸‹ ï¼Œä¸€å¤œä¹‹å†…èƒ½å¤Ÿå·çªƒåˆ°çš„**æœ€é«˜é‡‘é¢**ã€‚

**æ€è·¯** 

æ‰€æœ‰æˆ¿å±‹æ’åˆ—æ–¹å¼ä¸º**çº¿æ€§**ï¼Œåˆ¶çº¦å…³ç³»ä¸º**ä¸èƒ½æŠ¢ç›¸é‚»çš„æˆ¿å±‹**

<img src="https://raw.githubusercontent.com/JackFroster/Images/main/image/202207201708138.png" alt="image-20220720170849069" width="600px" />

**çº¿æ€§ DP** $O(n)$

```java
class Solution {
    public int rob(int[] nums) {
        int n = nums.length;
        int[] cash = new int[n + 1];
        for(int i = 1; i <= n; i ++ ) cash[i] = nums[i - 1];

        final int N = 110;
        int[] f = new int[N]; // f[i]è¡¨ç¤ºè€ƒè™‘å‰ié—´æˆ¿å±‹, æ‰€æœ‰æ»¡è¶³è¦æ±‚çš„æŠ¢åŠ«æ–¹æ¡ˆçš„é›†åˆ
        
        f[0] = 0; f[1] = cash[1]; // åˆå§‹åŒ–fæ•°ç»„

        for(int i = 2; i <= n; i ++ ) // æ ¹æ®ç¬¬ié—´æˆ¿å±‹æ˜¯å¦æŠ¢åŠ«å¯¹é›†åˆè¿›è¡Œåˆ’åˆ†
            f[i] = Math.max(f[i - 1], f[i - 2] + cash[i]);

        return f[n];
    }
}
```

##### ï¼ˆ2ï¼‰æ‰“å®¶åŠ«èˆ IIï¼ˆçº¿æ€§DPï¼‰

**é—®é¢˜**

ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°å·ï¼Œè®¡åˆ’å·çªƒæ²¿è¡—çš„æˆ¿å±‹ï¼Œæ¯é—´æˆ¿å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ã€‚è¿™ä¸ªåœ°æ–¹**æ‰€æœ‰çš„æˆ¿å±‹éƒ½å›´æˆä¸€åœˆ** ï¼Œè¿™æ„å‘³ç€**ç¬¬ä¸€ä¸ªæˆ¿å±‹å’Œæœ€åä¸€ä¸ªæˆ¿å±‹æ˜¯ç´§æŒ¨**ç€çš„ã€‚åŒæ—¶ï¼Œç›¸é‚»çš„æˆ¿å±‹è£…æœ‰ç›¸äº’è¿é€šçš„é˜²ç›—ç³»ç»Ÿï¼Œå¦‚æœä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹åœ¨åŒä¸€æ™šä¸Šè¢«å°å·é—¯å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ¥è­¦ ã€‚

ç»™å®šä¸€ä¸ªä»£è¡¨æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„ï¼Œè®¡ç®—ä½  åœ¨ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹ ï¼Œä»Šæ™šèƒ½å¤Ÿå·çªƒåˆ°çš„**æœ€é«˜é‡‘é¢**ã€‚

**æ€è·¯**

æ‰€æœ‰æˆ¿å±‹æ’åˆ—æ–¹å¼ä¸º**ç¯å½¢**ï¼Œåˆ¶çº¦å…³ç³»ä¸º**ä¸èƒ½æŠ¢ç›¸é‚»çš„æˆ¿å±‹**ï¼Œä¸”**é¦–å°¾ä¸¤æˆ¿å±‹ä¸èƒ½åŒæ—¶æŠ¢**

ç¯å½¢æ’åˆ—çš„é—®é¢˜--->ä¸¤ä¸ªçº¿æ€§æ’åˆ—çš„é—®é¢˜ï¼Œå³åˆ†åˆ«æ’é™¤ç¬¬ $1$ é—´æˆ¿å±‹($2ï½n$)å’Œç¬¬ $n$ é—´æˆ¿å±‹($1ï½n-1$)ï¼Œæ±‚`æ‰“å®¶åŠ«èˆI`

<img src="https://raw.githubusercontent.com/JackFroster/Images/main/image/202207201722338.png" alt="image-20220720172202267" width="500px" />

**çº¿æ€§ DP** $O(n)$

```java
class Solution {
    public int rob(int[] nums) {

        int n = nums.length;
        int[] cash = new int[n + 1];
        for(int i = 1; i <= n; i ++ ) cash[i] = nums[i - 1];

        final int N = 110;
        int[] f = new int[N];

        if(n > 1) { f[1] = 0; f[2] = cash[2];} 
        for(int i = 3; i <= n; i ++ ) // æ±‚ç¬¬2~né—´æˆ¿å±‹çš„æ‰“å®¶åŠ«èˆI
            f[i] = Math.max(f[i - 1], f[i - 2] + cash[i]);

        f[0] = 0; f[1] = cash[1];
        for(int i = 2; i <= n - 1; i ++ ) // æ±‚ç¬¬1~n-1é—´æˆ¿å±‹çš„æ‰“å®¶åŠ«èˆI
            f[i] = Math.max(f[i - 1], f[i - 2] + cash[i]);

        return Math.max(f[n - 1], f[n]); // ä¸¤ä¸ªæ–¹å¼æ±‚æœ€å¤§å€¼
    }
}
```

##### ï¼ˆ3ï¼‰æ‰“å®¶åŠ«èˆ IIIï¼ˆæ ‘å½¢DPï¼‰

**é—®é¢˜**

å°å·åˆå‘ç°äº†ä¸€ä¸ªæ–°çš„å¯è¡Œçªƒçš„åœ°åŒºã€‚è¿™ä¸ªåœ°åŒºåªæœ‰ä¸€ä¸ªå…¥å£ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º `root` ã€‚

é™¤äº† `root` ä¹‹å¤–ï¼Œæ¯æ ‹æˆ¿å­æœ‰ä¸”åªæœ‰ä¸€ä¸ªâ€œçˆ¶â€œæˆ¿å­ä¸ä¹‹ç›¸è¿ã€‚ä¸€ç•ªä¾¦å¯Ÿä¹‹åï¼Œèªæ˜çš„å°å·æ„è¯†åˆ°â€œè¿™ä¸ªåœ°æ–¹çš„**æ‰€æœ‰æˆ¿å±‹çš„æ’åˆ—ç±»ä¼¼äºä¸€æ£µäºŒå‰æ ‘**â€ã€‚ å¦‚æœä¸¤ä¸ªç›´æ¥ç›¸è¿çš„æˆ¿å­åœ¨åŒä¸€å¤©æ™šä¸Šè¢«æ‰“åŠ« ï¼Œæˆ¿å±‹å°†è‡ªåŠ¨æŠ¥è­¦ã€‚

ç»™å®šäºŒå‰æ ‘çš„ `root` ã€‚è¿”å› åœ¨ä¸è§¦åŠ¨è­¦æŠ¥çš„æƒ…å†µä¸‹ ï¼Œå°å·èƒ½å¤Ÿç›—å–çš„æœ€é«˜é‡‘é¢ ã€‚

<img src="https://raw.githubusercontent.com/JackFroster/Images/main/image/202207201730790.jpeg" alt="img" width="200px" />

**æ€è·¯**

æ‰€æœ‰æˆ¿å±‹æ’åˆ—æ–¹å¼ä¸º**äºŒå‰æ ‘å½¢**ï¼Œåˆ¶çº¦å…³ç³»ä½“ç°åœ¨**çˆ¶èŠ‚ç‚¹ä¸å·¦å³å­©å­èŠ‚ç‚¹çš„åˆ¶çº¦**ï¼Œå…·ä½“ä¸ºçˆ¶èŠ‚ç‚¹æŠ¢äº†ï¼Œå·¦å³å­©å­ä¸€å®šä¸èƒ½æŠ¢

æ­¤é¢˜ä¸[æ²¡æœ‰ä¸Šå¸çš„èˆä¼š](https://www.acwing.com/problem/content/287/)ä¸€è‡´ï¼Œè§£é¢˜æ€è·¯ç›¸åŒ

**æ ‘å½¢DP** $O(logn)$ 

```java
class Solution {

    final int N = 10010;
    // f[i][0]è¡¨ç¤ºä»¥iä¸ºæ ¹å­æ ‘ä¸­ï¼Œä¸è¿­ä»£içš„æ‰€ä»¥æƒ…å†µçš„é›†åˆ
    // f[i][1]è¡¨ç¤ºä»¥iä¸ºæ ¹å­æ ‘ä¸­ï¼Œè¿­ä»£içš„æ‰€ä»¥æƒ…å†µçš„é›†åˆ
    int[][] f = new int[N][2]; 
    int idx = 1;
    HashMap<TreeNode, Integer> mp = new HashMap<>(); // å­˜å‚¨TreeNodeåŠå…¶ç¼–å·çš„é”®å€¼å¯¹

    public void code(TreeNode u) { // å¯¹æ ‘ä¸­çš„æ¯ä¸€ä¸ªç»“ç‚¹è¿›è¡Œç¼–å·, æ ¹ç»“ç‚¹çš„ç¼–å·ä¸º1
        mp.put(u, idx ++ );
        if(u.left != null) code(u.left);
        if(u.right != null) code(u.right);
    }

    public void dfs(TreeNode u) { // æ±‚è§£æ ‘å½¢DP
        int root = mp.get(u);
        f[root][1] = u.val;

        if(u.left != null) 
        {
            dfs(u.left);
            int l = mp.get(u.left);
            f[root][1] += f[l][0]; // çˆ¶èŠ‚ç‚¹æŠ¢äº†ï¼Œå·¦å³å­©å­ä¸€å®šä¸èƒ½æŠ¢
            f[root][0] += Math.max(f[l][0], f[l][1]);
        }

        if(u.right != null)
        {
            dfs(u.right);
            int r = mp.get(u.right);
            f[root][1] += f[r][0]; // çˆ¶èŠ‚ç‚¹æŠ¢äº†ï¼Œå·¦å³å­©å­ä¸€å®šä¸èƒ½æŠ¢
            f[root][0] += Math.max(f[r][0], f[r][1]);
        }
    }

    public int rob(TreeNode root) {
        code(root);
        dfs(root);
        return Math.max(f[1][0], f[1][1]);
    }
}
```

### 4ã€ä¸‘æ•°

##### ï¼ˆ1ï¼‰ä¸‘æ•°ï¼ˆåˆ†è§£è´¨å› æ•°ï¼‰

**é—®é¢˜**

**ä¸‘æ•°** å°±æ˜¯åªåŒ…å«è´¨å› æ•° `2`ã€`3` æˆ– `5` çš„æ­£æ•´æ•°ã€‚

ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` ï¼Œè¯·ä½ åˆ¤æ–­ `n` æ˜¯å¦ä¸º **ä¸‘æ•°** ã€‚å¦‚æœæ˜¯ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚

**æ€è·¯ä¸€** **é™¤å› å­**

```java
class Solution {
    public boolean isUgly(int n) {
        if(n <= 0) return false; // ç‰¹åˆ¤

        while(n % 2 == 0) n /= 2; // å¦‚æœåŒ…å«2ï¼Œå°†2é™¤å°½
        while(n % 3 == 0) n /= 3; // å¦‚æœåŒ…å«3ï¼Œå°†3é™¤å°½
        while(n % 5 == 0) n /= 5; // å¦‚æœåŒ…å«5ï¼Œå°†5é™¤å°½

        return n == 1; // å¦‚æœè¿˜åŒ…å«å…¶ä»–è´¨å› æ•°, åˆ™ä¸æ˜¯ä¸‘æ•°
    }
}
```

**æ€è·¯äºŒ** **åˆ†è§£è´¨å› æ•°** $O(n)$ 

```java
class Solution {
	// primeå­˜æ”¾åˆ†è§£è´¨å› æ•°åçš„ç»“æœ
    Map<Integer, Integer> prime = new HashMap<>(); // keyæ˜¯åº•æ•°, valueæ˜¯æŒ‡æ•°

    public void find(int x) { // åˆ†è§£è´¨å› æ•°, xå¿…é¡»æ˜¯è‡ªç„¶æ•°
        for(int i = 2; i <= x / i; i ++ )
            if(x % i == 0) { // å¦‚æœxåŒ…å«iè¿™ä¸ªè´¨å› å­, å°±å°†ié™¤å°½
                int t = prime.getOrDefault(i, 0);
                while(x % i == 0) {
                    x /= i; 
                    t ++ ;
                }
                prime.put(i, t);
            }

        if(x > 1) prime.put(x, prime.getOrDefault(x, 0) + 1); // å°†æœ€åä¸€ä¸ªå¤§äº sqrt(x)çš„å› å­åŠ è¿›å»
    }

    public boolean isUgly(int n) {
        if(n == 1) return true; // ç‰¹åˆ¤
        if(n <= 0) return false; // ç‰¹åˆ¤
        
        find(n);
        Set<Integer> factors = prime.keySet();
        for(Integer x : factors)
            if(x != 2 && x != 3 && x != 5) return false; // å¦‚æœnè¿˜åŒ…å«å…¶ä»–å› å­ï¼Œåˆ™ä¸æ˜¯ä¸‘æ•°
        return true; // nåªåŒ…å«2æˆ–3æˆ–5
    }
}
```

##### ï¼ˆ2ï¼‰ä¸‘æ•° IIï¼ˆåŠ¨æ€è§„åˆ’ï¼‰

**é—®é¢˜**

ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` ï¼Œè¯·ä½ æ‰¾å‡ºå¹¶è¿”å›ç¬¬ `n` ä¸ª **ä¸‘æ•°** ã€‚

**ä¸‘æ•°** å°±æ˜¯åªåŒ…å«è´¨å› æ•° `2`ã€`3` å’Œ/æˆ– `5` çš„æ­£æ•´æ•°ã€‚

**æ€è·¯** 

å®šä¹‰æ•°ç»„ $f$ï¼Œå…¶ä¸­ $f[i]$ è¡¨ç¤ºç¬¬ $i$ ä¸ªä¸‘æ•°ï¼Œç¬¬ $n$ ä¸ªä¸‘æ•°å³ä¸º $f[n]$ã€‚

ç”±äºæœ€å°çš„ä¸‘æ•°æ˜¯ $1$ï¼Œå› æ­¤ $f[1]=1$ã€‚

å¦‚ä½•å¾—åˆ°å…¶ä½™çš„ä¸‘æ•°å‘¢ï¼Ÿå®šä¹‰ä¸‰ä¸ªæŒ‡é’ˆ $a$, $b$, $c$ ï¼Œè¡¨ç¤ºä¸‹ä¸€ä¸ªä¸‘æ•°æ˜¯å½“å‰æŒ‡é’ˆæŒ‡å‘çš„ä¸‘æ•°ä¹˜ä»¥å¯¹åº”çš„è´¨å› æ•°ã€‚åˆå§‹æ—¶ï¼Œä¸‰ä¸ªæŒ‡é’ˆçš„å€¼éƒ½æ˜¯ $1$ã€‚

å½“ $2â‰¤iâ‰¤n$ æ—¶ï¼Œä»¤ $\textit{f}[i]=\min(\textit{f}[a] \times 2, \textit{f}[b] \times 3, \textit{f}[c] \times 5)$)ï¼Œç„¶ååˆ†åˆ«æ¯”è¾ƒ $f[i]$ å’Œ $\textit{f}[a] \times 2,\textit{f}[b] \times 3,\textit{f}[c] \times 5$ æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™å°†å¯¹åº”çš„æŒ‡é’ˆåŠ  1ã€‚

**åŠ¨æ€è§„åˆ’** $O(n)$

```java
class Solution {
    public int nthUglyNumber(int n) {
        int[] f = new int[n + 1]; // çŠ¶æ€æ•°ç»„ï¼Œf[i]è¡¨ç¤ºç¬¬iä¸ªä¸‘æ•°, iä»1å¼€å§‹
        f[1] = 1; // åˆå§‹åŒ–

        int a = 1, b = 1, c = 1; // å®šä¹‰ä¸‰ä¸ªæŒ‡é’ˆ, åˆå§‹åŒ–æ—¶æŒ‡å‘ç¬¬ä¸€ä¸ªä¸‘æ•°
        for(int i = 2; i <= n; i ++ ) { // ä¾æ¬¡è®¡ç®—å‡ºç¬¬2, ..., nä¸ªä¸‘æ•°
            int x = f[a] * 2, y = f[b] * 3, z = f[c] * 5; // ä¸‹ä¸€ä¸ªä¸‘æ•°
            f[i] = Math.min(Math.min(x, y), z); // å€¼æœ€å°çš„å³å¯ä½œä¸ºä¸‹ä¸€ä¸ªä¸‘æ•°
            
            // å¦‚æœä¸€ä¸ªä¸‘æ•°f[a]é€šè¿‡ä¹˜ä»¥2å¯ä»¥å¾—åˆ°ä¸‹ä¸€ä¸ªä¸‘æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªä¸‘æ•°f[a]å°±æ°¸è¿œå¤±å»äº†åŒ2ç›¸ä¹˜çš„èµ„æ ¼ï¼ˆæ²¡æœ‰å¿…è¦å†ä¹˜äº†ï¼‰ï¼Œæˆ‘ä»¬æŠŠa++è®©aæŒ‡å‘ä¸‹ä¸€ä¸ªä¸‘æ•°å³å¯
            if(f[i] == x) a ++ ;
            if(f[i] == y) b ++ ;
            if(f[i] == z) c ++ ;
        }

        return f[n];
    }
}
```

##### ï¼ˆ3ï¼‰è¶…çº§ä¸‘æ•°ï¼ˆåŠ¨æ€è§„åˆ’ï¼‰

**é—®é¢˜** 

**è¶…çº§ä¸‘æ•°** æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œå¹¶æ»¡è¶³å…¶æ‰€æœ‰è´¨å› æ•°éƒ½å‡ºç°åœ¨è´¨æ•°æ•°ç»„ `primes` ä¸­ã€‚

ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` å’Œä¸€ä¸ªæ•´æ•°æ•°ç»„ `primes` ï¼Œè¿”å›ç¬¬ `n` ä¸ª **è¶…çº§ä¸‘æ•°** ã€‚

é¢˜ç›®æ•°æ®ä¿è¯ç¬¬ `n` ä¸ª è¶…çº§ä¸‘æ•° **åœ¨ 32-bit** å¸¦ç¬¦å·æ•´æ•°èŒƒå›´å†…ã€‚

**æ€è·¯**

æ­¤é—®é¢˜æ˜¯ [ä¸‘æ•°II](https://leetcode.cn/problems/ugly-number-ii/) çš„æ‹“å±•é¢˜ï¼Œæ€è·¯ä¸å…¶ç±»ä¼¼

å®šä¹‰æ•°ç»„ $f$ï¼Œå…¶ä¸­ $f[i]$ è¡¨ç¤ºç¬¬ $i$ ä¸ªä¸‘æ•°ï¼Œç¬¬ $n$ ä¸ªä¸‘æ•°å³ä¸º $f[n]$ã€‚

ç”±äºæœ€å°çš„ä¸‘æ•°æ˜¯ $1$ï¼Œå› æ­¤ $f[1]=1$ã€‚

å¦‚ä½•å¾—åˆ°å…¶ä½™çš„ä¸‘æ•°å‘¢ï¼Ÿå®šä¹‰æŒ‡é’ˆæ•°ç»„ $p$ï¼Œè¡¨ç¤ºä¸‹ä¸€ä¸ªä¸‘æ•°æ˜¯å½“å‰æŒ‡é’ˆæŒ‡å‘çš„ä¸‘æ•°ä¹˜ä»¥å¯¹åº”çš„è´¨å› æ•°ã€‚åˆå§‹æ—¶ä¸‰ä¸ªæŒ‡é’ˆçš„å€¼éƒ½æ˜¯ $1$ã€‚

å½“ $2â‰¤iâ‰¤n$ æ—¶ï¼Œä»¤ $\textit{f}[i]=\min(\textit{f}[p[1]] \times prime[1], \textit{f}[p[2]] \times prime[2], ...,\textit{f}[p[k]] \times prime[k])$)ï¼Œç„¶ååˆ†åˆ«æ¯”è¾ƒ $f[i]$ å’Œ $\textit{f}[p[1]] \times prime[1],\textit{f}[p[2]] \times prime[2],...,\textit{f}[p[k]] \times prime[k]$ æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™å°†å¯¹åº”çš„æŒ‡é’ˆåŠ  1ã€‚

**åŠ¨æ€è§„åˆ’** $O(nm)$ï¼Œ $m$è¡¨ç¤º`prime`æ•°ç»„çš„å¤§å°

```java
class Solution {
    public int nthSuperUglyNumber(int n, int[] primes) {
        int[] f = new int[n + 1]; // çŠ¶æ€æ•°ç»„ï¼Œf[i]è¡¨ç¤ºç¬¬iä¸ªä¸‘æ•°, iä»1å¼€å§‹
        f[1] = 1; // åˆå§‹åŒ–ç¬¬ä¸€ä¸ªä¸‘æ•°

        int[] p = new int[primes.length]; // pæ˜¯æŒ‡é’ˆæ•°ç»„
        Arrays.fill(p, 1); // æŒ‡é’ˆæ•°ç»„pä¸­çš„æ¯ä¸ªæŒ‡é’ˆåˆå§‹åŒ–æ—¶, éƒ½æŒ‡å‘ç¬¬ä¸€ä¸ªä¸‘æ•°

        for(int i = 2; i <= n; i ++ ) {
            // è®¡ç®—ä¸‹ä¸€ä¸ªä¸‘æ•°
            long[] a = new long[primes.length];
            long t = Long.MAX_VALUE;
            for(int j = 0; j < p.length; j ++ ) { // æŒ‡é’ˆæ•°ç»„æ‰€æŒ‡ä¸‘æ•°ä¸å¯¹åº”çš„primeç›¸ä¹˜, æœ€å°å€¼å³ä¸ºä¸‹ä¸€ä¸ªä¸‘æ•°
                a[j] = (long)f[p[j]] * primes[j]; // å¯èƒ½ä¼šintæº¢å‡º
                t = Math.min(t, a[j]);
            }
            f[i] = (int)t;
            // æ›´æ–°æŒ‡é’ˆ
            // å¦‚æœä¸€ä¸ªä¸‘æ•°f[p[i]]é€šè¿‡ä¹˜ä»¥prime[i]å¯ä»¥å¾—åˆ°ä¸‹ä¸€ä¸ªä¸‘æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªä¸‘æ•°f[p[i]]å°±æ°¸è¿œå¤±å»äº†åŒprime[i]ç›¸ä¹˜çš„èµ„æ ¼ï¼ˆæ²¡æœ‰å¿…è¦å†ä¹˜äº†ï¼‰ï¼Œæˆ‘ä»¬æŠŠprime[i]++è®©prime[i]æŒ‡å‘ä¸‹ä¸€ä¸ªä¸‘æ•°å³å¯
            for(int j = 0; j < a.length; j ++ ) 
                if(f[i] == a[j]) p[j] ++ ;
        }

        return f[n];
    }
}
```

##### ï¼ˆ4ï¼‰ç¬¬ N ä¸ªç¥å¥‡æ•°å­—ï¼ˆäºŒåˆ†+å®¹æ–¥åŸç†ï¼‰

**é—®é¢˜**

ä¸€ä¸ªæ­£æ•´æ•°å¦‚æœèƒ½è¢« `a` æˆ– `b` æ•´é™¤ï¼Œé‚£ä¹ˆå®ƒæ˜¯ç¥å¥‡çš„ã€‚

ç»™å®šä¸‰ä¸ªæ•´æ•° `n` , `a` , `b` ï¼Œè¿”å›ç¬¬ `n` ä¸ªç¥å¥‡çš„æ•°å­—ã€‚å› ä¸ºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œæ‰€ä»¥è¿”å›ç­”æ¡ˆ **å¯¹** `109 + 7` **å–æ¨¡** åçš„å€¼ã€‚

**æ€è·¯**

è®¾ $L=lcm(a, b)$ ä¸º $a,b$ çš„**æœ€å°å…¬å€æ•°**ï¼Œ$L=\frac{a * b}{gcd(a, b)}$

æŠŠ$1ï½x$ ä¹‹é—´ çš„ $a$ çš„å€æ•°ã€$b$ çš„å€æ•°ç»„æˆçš„é›†åˆåˆ†åˆ«å«åš $A$ã€$B$ï¼Œ$1ï½x$ä¹‹é—´ çš„ç¥å¥‡æ•°å­—ç›¸å½“äºé›†åˆ $A \cup B $ï¼Œé›†åˆå…ƒç´ çš„ä¸ªæ•°ä¸º $|A \cup B |$ï¼Œç”±**å®¹æ–¥åŸç†**å¯å¾—ï¼š
$$
\left|A_{1} \cup A_{2} \cup \ldots \cup A_{n}\right|=\sum_{1 \leq i \leq n}\left|A_{i}\right|-\sum_{1 \leq i<j \leq n}\left|A_{i} \cap A_{j}\right|+\ldots+(-1)^{n-1}\left|A_{1} \cap A_{2} \cap \ldots \cap A_{n}\right|
$$
å¸¦å…¥å¯å¾—
$$
|A \cup B |=|A|+|B|-|A \cap B|
$$
ä¹Ÿå°±æ˜¯è¯´$1ï½x $ çš„ç¥å¥‡æ•°å­—ä¸ªæ•°ä¸º
$$
f(x)=\left\lfloor\frac{x}{a}\right\rfloor+\left\lfloor\frac{x}{b}\right\rfloor-\left\lfloor\frac{x}{\operatorname{lcm}(a, b)}\right\rfloor
$$
$f(x)$ ä¸º $1ï½x $ä¹‹é—´çš„ç¥å¥‡æ•°å­—çš„ä¸ªæ•°ï¼Œæ˜¯ä¸€ä¸ª**å•è°ƒé€’å¢å‡½æ•°**ã€‚$f(x)=\left\lfloor\frac{x}{a}\right\rfloor+\left\lfloor\frac{x}{b}\right\rfloor-\left\lfloor\frac{x}{lcm(a,b)}\right\rfloor$ï¼Œæœ‰ $\left\lfloor\frac{x}{a}\right\rfloor$ä¸ªæ•°å­—èƒ½è¢« $a$ æ•´é™¤çš„ï¼Œæœ‰ $\left\lfloor\frac{x}{b}\right\rfloor$ä¸ªæ•°å­—èƒ½è¢« $b$ æ•´é™¤çš„ï¼Œæœ‰ $\left\lfloor\frac{x}{lcm(a,b)}\right\rfloor$ä¸ªæ•°å­—èƒ½è¢« $a,b$ æ•´é™¤çš„ã€‚

$f(x)$ æ˜¯ä¸€ä¸ªå•å¢å‡½æ•°ï¼Œå¯ä»¥ç”¨**äºŒåˆ†**æœç´¢æ¥åšè¿™é“é¢˜ï¼Œåœ¨å¯è¡Œè§£èŒƒå›´å†…**äºŒåˆ†å·¦è¾¹ç•Œ**

**äºŒåˆ†** $o(logn)$

```java
class Solution {
    final int mod = (int)1e9 + 7;

    public int nthMagicalNumber(int n, int a, int b) {
        long l = 0, r = (long)1e14; // å¯è¡Œè§£æ‰€åœ¨çš„èŒƒå›´æ˜¯ [l,r], å³[0, 1e14]
        while(l < r) {
            long mid = l + r >> 1;
            // æ»¡è¶³ (mid / a + mid / b - mid / lcm(a,b) == n) æ¡ä»¶çš„midæœ‰å¾ˆå¤šä¸ª, æœ€å·¦è¾¹çš„midä¸€å®šæ˜¯ç¬¬nä¸ªç¥å¥‡æ•°å­—
            if(mid / a + mid / b - mid / lcm(a,b) < n) l = mid + 1; // äºŒåˆ†å·¦è¾¹ç•Œ
            else r = mid; 
        }

        return (int)(l % mod);
    }

    public int gcd(int a, int b) { // æ±‚ a å’Œ b çš„æœ€å¤§å…¬çº¦æ•°
        return b != 0 ? gcd(b, a % b) : a;
    }

    public int lcm(int a, int b) { // æ±‚ a å’Œ b çš„æœ€å°å…¬å€æ•°
        return a * b / gcd(a, b);
    }   
}
```

##### ï¼ˆ5ï¼‰ä¸‘æ•° IIIï¼ˆäºŒåˆ†+å®¹æ–¥åŸç†ï¼‰

**é—®é¢˜**

ç»™ä½ å››ä¸ªæ•´æ•°ï¼š`n` ã€`a` ã€`b` ã€`c` ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥æ‰¾å‡ºç¬¬ `n` ä¸ªä¸‘æ•°ã€‚

ä¸‘æ•°æ˜¯å¯ä»¥è¢« `a` **æˆ–** `b` **æˆ–** `c` æ•´é™¤çš„ **æ­£æ•´æ•°** ã€‚

æœ¬é¢˜ç»“æœåœ¨ `[1, 2 * 10^9]` çš„èŒƒå›´å†…

**æ€è·¯** 

æ­¤é—®é¢˜æ˜¯ [ç¬¬ N ä¸ªç¥å¥‡æ•°å­—](https://leetcode.cn/problems/nth-magical-number/) çš„æ‹“å±•é¢˜ï¼Œæ€è·¯ä¸å…¶ç±»ä¼¼

æŠŠ$1ï½x$ ä¹‹é—´ çš„ $a$ çš„å€æ•°ã€$b$ çš„å€æ•°ã€$c$ çš„å€æ•°ç»„æˆçš„é›†åˆåˆ†åˆ«å«åš $A$ã€$B$ã€$C$ï¼Œ$1ï½x$ä¹‹é—´ çš„ä¸‘æ•°ç›¸å½“äºé›†åˆ $A \cup B \cup C$ï¼Œé›†åˆå…ƒç´ çš„ä¸ªæ•°ä¸º $|A \cup B \cup C|$ï¼Œç”±**å®¹æ–¥åŸç†**å¯å¾—ï¼š
$$
\left|A_{1} \cup A_{2} \cup \ldots \cup A_{n}\right|=\sum_{1 \leq i \leq n}\left|A_{i}\right|-\sum_{1 \leq i<j \leq n}\left|A_{i} \cap A_{j}\right|+\ldots+(-1)^{n-1}\left|A_{1} \cap A_{2} \cap \ldots \cap A_{n}\right|
$$
å¸¦å…¥å¯å¾—
$$
|A \cup B \cup C|=|A|+|B|+|C|-|A \cap B|-|A \cap C|-|B \cap C|+|A \cap B \cap C|
$$
ä¹Ÿå°±æ˜¯è¯´$1ï½x $ çš„ä¸‘æ•°ä¸ªæ•°ä¸º
$$
f(x)=\left\lfloor\frac{x}{a}\right\rfloor+\left\lfloor\frac{x}{b}\right\rfloor+\left\lfloor\frac{x}{c}\right\rfloor-\left\lfloor\frac{x}{\operatorname{lcm}(a, b)}\right\rfloor-\left\lfloor\frac{x}{\operatorname{lcm}(a, c)}\right\rfloor-\left\lfloor\frac{x}{\operatorname{lcm}(b, c)}\right\rfloor+\left\lfloor\frac{x}{\operatorname{lcm}(a, b, c)}\right\rfloor
$$
$f(x)$ æ˜¯ä¸€ä¸ªå•å¢å‡½æ•°ï¼Œå¯ä»¥ç”¨**äºŒåˆ†**æœç´¢æ¥åšè¿™é“é¢˜ï¼Œåœ¨å¯è¡Œè§£èŒƒå›´å†…**äºŒåˆ†å·¦è¾¹ç•Œ**

**äºŒåˆ†** $O(logn)$ 

```java
class Solution {
    public int nthUglyNumber(int n, int a, int b, int c) {
        long l = Math.min(Math.min(a, b), c), r = (long)2e9; // å¯è¡Œè§£æ‰€åœ¨çš„èŒƒå›´æ˜¯ [l,r], å³[0, 2e9]
        while(l < r) {
            long mid = l + r >> 1;
            if(check(mid, a, b, c, n)) l = mid + 1; // æ»¡è¶³check()æ¡ä»¶çš„midæœ‰å¾ˆå¤šä¸ª, æœ€å·¦è¾¹çš„midä¸€å®šæ˜¯ç¬¬nä¸ªä¸‘æ•°
            else r = mid;
        }
        return (int)l;
    }

    public boolean check(long x, int a, int b, int c, int n) {
        return x / a + x / b + x / c 
        - x / lcm(a, b) - x / lcm(a, c) - x / lcm(b, c) 
        + x / lcm(lcm(a, b), c) < n;        
    }

    public long gcd(long a, long b) { // æ±‚ a å’Œ b çš„æœ€å¤§å…¬çº¦æ•°
        return b != 0 ? gcd(b, a % b) : a;
    }

    public long lcm(long a, long b) { // æ±‚ a å’Œ b çš„æœ€å°å…¬å€æ•°
        return a * b / gcd(a, b);
    }  
}
```

##### ï¼ˆ6ï¼‰AcWing 890. èƒ½è¢«æ•´é™¤çš„æ•°ï¼ˆå®¹æ–¥åŸç†ï¼‰

**é—®é¢˜**

ç»™å®šä¸€ä¸ªæ•´æ•° $n$ å’Œ $m$ ä¸ªä¸åŒçš„**è´¨æ•°** $p_1,p_2,â€¦,p_m$ã€‚

è¯·ä½ æ±‚å‡º $1âˆ¼n$ ä¸­èƒ½è¢« $p_1,p_2,â€¦,p_m$ ä¸­çš„è‡³å°‘ä¸€ä¸ªæ•°æ•´é™¤çš„æ•´æ•°æœ‰å¤šå°‘ä¸ª

- $1â‰¤mâ‰¤16,1â‰¤n$,
- $p_iâ‰¤10^9$

**æ€è·¯** 

å®¹æ–¥åŸç†
$$
S_1â‹ƒS_2â‹ƒ...S_m=S_1+S_2+â€¦+S_iâˆ’(S_1â‹‚S_2+S_1â‹‚S_3+â€¦+S_{mâˆ’1}â‹‚S_m)+...\\
|S_1â‹ƒS_2â‹ƒ...S_m|=|S_1|+|S_2|+â€¦+|S_i|âˆ’(|S_1â‹‚S_2|+|S_1â‹‚S_3|+â€¦+|S_{mâˆ’1}â‹‚S_m|)+...
$$
æ±‚å‡º $1âˆ¼n$ ä¸­èƒ½è¢« $p_1,p_2,â€¦,p_m$ ä¸­çš„è‡³å°‘ä¸€ä¸ªæ•°æ•´é™¤çš„æ•´æ•°æœ‰å¤šå°‘ä¸ª?

- å°† $1âˆ¼n$ ä¸­æ˜¯ $p_1$çš„å€æ•°è§†ä¸ºé›†åˆ $S_1$ï¼Œæ˜¯ $p_2$ çš„å€æ•°è§†ä¸ºé›†åˆ $S_2$ï¼Œ...
- "$1âˆ¼n$ ä¸­èƒ½è¢« $p_1,p_2,â€¦,p_m$ ä¸­çš„è‡³å°‘ä¸€ä¸ªæ•°æ•´é™¤çš„æ•´æ•°çš„ä¸ªæ•°â€å¯ä»¥ç”¨é›†åˆè¡¨ç¤ºä¸º $|S_1â‹ƒS_2â‹ƒ...S_m|$

- è°ƒç”¨ä»¥ä¸Šå®¹æ–¥åŸç†è¿›è¡Œè®¡ç®—ï¼Œå…·ä½“è®¡ç®—æ–¹å¼ï¼š
  -  $|S_1|=n/p_1$ï¼›
  - $|S_1â‹‚S_2|=n/(p_1Ã—p_2)$ï¼›
  - ....

æ³¨ï¼šå®¹æ–¥åŸç†è¡¨è¾¾å¼å³ä¾§æ‰€æœ‰é›†åˆçš„ä¸ªæ•°ä¸º $2^m-1$

å¯ä»¥ç”¨ $m$ ä½çš„äºŒè¿›åˆ¶æ•°è¿›è¡Œæšä¸¾ï¼Œæ¯ä¸€ä¸ªäºŒè¿›æ•°(é™¤0å¤–)éƒ½å¯ä»¥ä¸è¡¨è¾¾å¼å³ä¾§çš„é›†åˆä¸€ä¸€å¯¹åº”

$O(mÃ—2^m)$

```c++
#include <iostream>
#include <cstring>
#include <algorithm>

using namespace std;
typedef long long LL;
const int N = 20;
int n, m;
int p[N]; // å­˜å‚¨ç»™å®šçš„è´¨æ•°

int main()
{
    cin >> n >> m;
    for(int i = 0; i < m; i ++) cin >> p[i];
 
    int res = 0; // è¡¨ç¤º1-nä¸­èƒ½è¢«è´¨æ•°p1ã€p2ã€...ã€æˆ–pmæ•´é™¤çš„æ•°çš„ä¸ªæ•°
    for(int i = 1; i < 1 << m; i ++) // ç”¨äºŒè¿›åˆ¶æ•°æšä¸¾æ‰€æœ‰é›†åˆ
    {
        int t = 1, cnt = 0; // tè¡¨ç¤ºè´¨æ•°çš„ä¹˜ç§¯ï¼Œcntå‚ä¸ä¹˜ç§¯çš„è´¨æ•°ä¸ªæ•°
        for(int j = 0; j < m; j ++) // æšä¸¾æ‰€æœ‰äºŒè¿›åˆ¶ä½
            if(i >> j & 1) // äºŒè¿›åˆ¶æ•°içš„ç¬¬jä½æ˜¯1
            {
                if((LL)t * p[j] > n)
                {
                    t = -1;
                    break;
                }
                t *= p[j];
                cnt ++ ;
            }
        
        if(t != -1)
        {
            if(cnt % 2) res += n / t; // å¥‡æ•°æ˜¯+
            else res -= n / t; // å¶æ•°æ˜¯-
        }
    }
    
    cout << res;
    return 0;
}
```

### 5ã€å‰ªç»³å­

##### ï¼ˆ1ï¼‰å‰ªç»³å­ Iï¼ˆçº¿æ€§ DPï¼‰

**é—®é¢˜**

ç»™ä½ ä¸€æ ¹é•¿åº¦ä¸º $n(2 <= n <= 58)$ çš„ç»³å­ï¼Œè¯·æŠŠç»³å­å‰ªæˆæ•´æ•°é•¿åº¦çš„ $m$ æ®µï¼ˆ$mã€n$éƒ½æ˜¯æ•´æ•°ï¼Œ$n>1$ å¹¶ä¸” $m>1$ï¼‰ï¼Œæ¯æ®µç»³å­çš„é•¿åº¦è®°ä¸º $k[0],k[1]...k[m-1]$ ã€‚è¯·é—® $k[0]Ã—k[1]Ã—...Ã—k[m-1]$ å¯èƒ½çš„æœ€å¤§ä¹˜ç§¯æ˜¯å¤šå°‘ï¼Ÿä¾‹å¦‚ï¼Œå½“ç»³å­çš„é•¿åº¦æ˜¯8æ—¶ï¼Œæˆ‘ä»¬æŠŠå®ƒå‰ªæˆé•¿åº¦åˆ†åˆ«ä¸º 2ã€3ã€3 çš„ä¸‰æ®µï¼Œæ­¤æ—¶å¾—åˆ°çš„æœ€å¤§ä¹˜ç§¯æ˜¯ 18ã€‚

**æ€è·¯** 

<img src="https://raw.githubusercontent.com/JackFroster/Images/main/image/202208131744608.png" alt="image-20220813174400472" width="600px" />

**çº¿æ€§ DP** $O(n^2)$

```java
class Solution {
    public int cuttingRope(int n) {
        final int N = 70;
        int[] f = new int[N]; // f[i]è¡¨ç¤ºä¸€æ ¹é•¿åº¦ä¸ºiçš„ç»³å­, å‰ªæˆmæ®µçš„æ‰€æœ‰æ–¹æ¡ˆçš„é›†åˆ, mæ®µçš„æœ€å¤§ä¹˜ç§¯æ˜¯f[i]
    
        f[1] = 1; // åˆå§‹åŒ–

        for(int i = 2; i <= n; i ++ ) 
            for(int j = 1; j <= i / 2; j ++ ) { // çŠ¶æ€è®¡ç®—
                int t = Math.max(f[j], j) * Math.max(f[i - j] ,i - j);
                f[i] = Math.max(f[i], t);
            }
                
        return f[n];
    }
}
```



##### ï¼ˆ2ï¼‰å‰ªç»³å­ IIï¼ˆçº¿æ€§ DP+é«˜ç²¾åº¦ï¼‰

**é—®é¢˜**

ç»™ä½ ä¸€æ ¹é•¿åº¦ä¸º $n(2 <= n <= 1000)$ çš„ç»³å­ï¼Œè¯·æŠŠç»³å­å‰ªæˆæ•´æ•°é•¿åº¦çš„ $m$ æ®µï¼ˆ$mã€n$éƒ½æ˜¯æ•´æ•°ï¼Œ$n>1$ å¹¶ä¸” $m>1$ï¼‰ï¼Œæ¯æ®µç»³å­çš„é•¿åº¦è®°ä¸º $k[0],k[1]...k[m - 1]$ ã€‚è¯·é—®  å¯èƒ½çš„æœ€å¤§$k[0]Ã—k[1]Ã—...Ã—k[m-1]$ä¹˜ç§¯æ˜¯å¤šå°‘ï¼Ÿä¾‹å¦‚ï¼Œå½“ç»³å­çš„é•¿åº¦æ˜¯ 8 æ—¶ï¼Œæˆ‘ä»¬æŠŠå®ƒå‰ªæˆé•¿åº¦åˆ†åˆ«ä¸º 2ã€3ã€3çš„ä¸‰æ®µï¼Œæ­¤æ—¶å¾—åˆ°çš„æœ€å¤§ä¹˜ç§¯æ˜¯ 18

**æ€è·¯** 

<img src="https://raw.githubusercontent.com/JackFroster/Images/main/image/202208131744608.png" alt="image-20220813174400472" width="600px" />

`Java` ä¸­ æä¾›äº†ç”¨äºå¤„ç†é«˜ç²¾åº¦çš„ç±» `BigInteger`

**çº¿æ€§DP + é«˜ç²¾åº¦** $O(n^2)$ 

```java
import java.math.BigInteger;

class Solution {
    public int cuttingRope(int n) {
        final int N = 1010;
        final BigInteger mod = BigInteger.valueOf(1000000007);

        // f[i]è¡¨ç¤ºä¸€æ ¹é•¿åº¦ä¸ºiçš„ç»³å­, å‰ªæˆmæ®µçš„æ‰€æœ‰æ–¹æ¡ˆçš„é›†åˆ, mæ®µçš„æœ€å¤§ä¹˜ç§¯æ˜¯f[i]
        BigInteger[] f = new BigInteger[N]; 
        Arrays.fill(f, BigInteger.valueOf(0));
        f[1] = BigInteger.valueOf(1); // åˆå§‹åŒ–

        for(int i = 2; i <= n; i ++ ) 
            for(int j = 1; j <= i / 2; j ++ ) { // çŠ¶æ€è®¡ç®—
                BigInteger a = f[j].max(BigInteger.valueOf(j));
                BigInteger b = f[i - j].max(BigInteger.valueOf(i - j));
                BigInteger t = a.multiply(b);
                f[i] = f[i].max(t);
            }
                
        return f[n].divideAndRemainder(mod)[1].intValue();
    }
}
```

### 6ã€æœ€å¤šèƒ½å®Œæˆçš„æ’åºçš„å—

##### ï¼ˆ1ï¼‰æœ€å¤šèƒ½å®Œæˆçš„æ’åºçš„å— Iï¼ˆè´ªå¿ƒï¼‰

**é—®é¢˜ **

ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º `n` çš„æ•´æ•°æ•°ç»„ `arr` ï¼Œå®ƒè¡¨ç¤ºåœ¨ `[0, n - 1]` èŒƒå›´å†…çš„**æ•´æ•°çš„æ’åˆ—**ã€‚

æˆ‘ä»¬å°† `arr` åˆ†å‰²æˆè‹¥å¹² **å—** (å³åˆ†åŒº)ï¼Œå¹¶å¯¹æ¯ä¸ªå—å•ç‹¬æ’åºã€‚å°†å®ƒä»¬è¿æ¥èµ·æ¥åï¼Œä½¿å¾—è¿æ¥çš„ç»“æœå’ŒæŒ‰å‡åºæ’åºåçš„åŸæ•°ç»„ç›¸åŒã€‚

è¿”å›æ•°ç»„èƒ½åˆ†æˆçš„æœ€å¤šå—æ•°é‡ã€‚

æ³¨æ„ï¼Œ**arr** ä¸­æ¯ä¸ªå…ƒç´ éƒ½ **ä¸åŒ**

**æ€è·¯** 

å½“éå†åˆ°ç¬¬`i`ä¸ªä½ç½®æ—¶ï¼Œå¦‚æœå¯ä»¥åˆ‡åˆ†ä¸ºå—ï¼Œé‚£å‰iä¸ªä½ç½®çš„æœ€å¤§å€¼ä¸€å®šç­‰äº`i`ã€‚

å¦åˆ™ï¼Œä¸€å®šæœ‰æ¯”`i`å¤§çš„æ•°åˆ’åˆ†åˆ°å‰é¢çš„å—ï¼Œä¸€å®šæœ‰æ¯”`i`å°çš„æ•°åˆ’åˆ†åˆ°åé¢çš„å—ï¼Œé‚£å—æ’åºåï¼Œä¸€å®šä¸æ»¡è¶³å‡åºã€‚

ä¸”å‰ä¸€ä¸ªå—çš„æœ€å¤§å€¼è¦å°äºåä¸€ä¸ªå—çš„ä»»æ„ä¸€ä¸ªæ•°

**è´ªå¿ƒ** $O(long)$ 

```java
class Solution {
    public int maxChunksToSorted(int[] arr) {
        int max = -0x3f3f3f3f, cnt = 0; 
        for(int i = 0; i < arr.length; i ++ ) {
            max = Math.max(max, arr[i]);
            if(max == i) cnt ++ ;
        }
        return cnt;
    }
}
```



##### ï¼ˆ2ï¼‰æœ€å¤šèƒ½å®Œæˆçš„æ’åºçš„å— II



### 7ã€ç»„åˆæ’åˆ—é—®é¢˜

##### ï¼ˆ1ï¼‰å­é›† Iï¼ˆå›æº¯ï¼‰

**é—®é¢˜**

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`ï¼ˆ$1 <= nums.length <= 10$ï¼‰ ï¼Œæ•°ç»„ä¸­çš„å…ƒç´  **äº’ä¸ç›¸åŒ** ã€‚è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚

è§£é›† **ä¸èƒ½** åŒ…å«é‡å¤çš„å­é›†ã€‚ä½ å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›è§£é›†ã€‚

**æ€è·¯**

**é€’å½’å®ç°æŒ‡æ•°å‹æšä¸¾**

```java
class Solution {

    final int N = 16;
    List<List<Integer>> res = new ArrayList<>();
    int[] st = new int[N]; // çŠ¶æ€æ•°ç»„ 1è¡¨ç¤ºé€‰ 2è¡¨ç¤ºä¸é€‰
    int[] a = new int[N]; // æ•´æ•°æ•°ç»„ a
    int n = 0;

    public void dfs(int u) {
        if(u >= n) { // æ‰¾åˆ°ä¸€ä¸ªå­é›†
            List<Integer> arr = new ArrayList<>();
            for(int i = 0; i < n; i ++ )
                if(st[i] == 1) arr.add(a[i]);
            res.add(arr);
            return ;
        }

        st[u] = 2; dfs(u + 1); st[u] = 0; // ä¸é€‰ç¬¬uä¸ªæ•°
        st[u] = 1; dfs(u + 1); st[u] = 0; // é€‰ç¬¬uä¸ªæ•°
    }

    public List<List<Integer>> subsets(int[] nums) {
        a = nums;
        n = nums.length;

        dfs(0);
        return res;
    }
}
```

##### ï¼ˆ2ï¼‰å­é›† IIï¼ˆå»é‡+å›æº¯ï¼‰

**é—®é¢˜** 

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼ˆ$1 <= nums.length <= 10$ï¼‰ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«**é‡å¤å…ƒç´ **ï¼Œè¯·ä½ è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚

è§£é›† **ä¸èƒ½** åŒ…å«é‡å¤çš„å­é›†ã€‚è¿”å›çš„è§£é›†ä¸­ï¼Œå­é›†å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** æ’åˆ—ã€‚

**æ€è·¯**

å…ˆå¯¹åŸæ•°ç»„è¿›è¡Œæ’åºï¼Œå†**é€’å½’å®ç°æŒ‡æ•°å‹æšä¸¾**ï¼Œç”¨ `Set` é›†åˆå¯¹å…ƒç´ å»é‡

```java
class Solution {

    final int N = 16;
    Set<List<Integer>> res = new HashSet<>(); // setå»é‡
    int[] st = new int[N]; // çŠ¶æ€æ•°ç»„ 1è¡¨ç¤ºé€‰ 2è¡¨ç¤ºä¸é€‰
    int[] a = new int[N]; // æ•´æ•°æ•°ç»„ a
    int n = 0;

    public void dfs(int u) {
        if(u >= n) { // æ‰¾åˆ°ä¸€ä¸ªå­é›†
            List<Integer> arr = new ArrayList<>();
            for(int i = 0; i < n; i ++ )
                if(st[i] == 1) arr.add(a[i]);
            res.add(arr);
            return ;
        }

        st[u] = 2; dfs(u + 1); st[u] = 0; // ä¸é€‰ç¬¬uä¸ªæ•°
        st[u] = 1; dfs(u + 1); st[u] = 0; // é€‰ç¬¬uä¸ªæ•°
    }

    public List<List<Integer>> subsetsWithDup(int[] nums) {
        Arrays.sort(nums);
        a = nums;
        n = nums.length;

        dfs(0);
        return new ArrayList(res);
    }
}
```

##### ï¼ˆ3ï¼‰ç»„åˆ



### :mag_right: å‚è€ƒæ–‡çŒ® 

[1] https://leetcode.cn/ 

[2] https://www.acwing.com/ 

### :closed_lock_with_key: License

æœ¬æ–‡å†…å®¹ä¸æ˜¯å°†ç½‘ä¸Šçš„èµ„æ–™éšæ„æ‹¼å‡‘è€Œæ¥ï¼Œé™¤äº†å°‘éƒ¨åˆ†å¼•ç”¨ä¹¦ä¸Šå’ŒæŠ€æœ¯æ–‡æ¡£çš„åŸæ–‡ï¼ˆè¿™éƒ¨åˆ†å†…å®¹éƒ½åœ¨æœ«å°¾çš„å‚è€ƒæ–‡çŒ®ä¸­åŠ äº†å‡ºå¤„ï¼‰ï¼Œå…¶ä½™éƒ½æ˜¯ä½œè€…çš„åŸåˆ›ã€‚åœ¨æ‚¨å¼•ç”¨æœ¬æ–‡å†…å®¹æˆ–è€…å¯¹å†…å®¹è¿›è¡Œä¿®æ”¹æ¼”ç»æ—¶ï¼Œè¯·ç½²åå¹¶ä»¥ç›¸åŒæ–¹å¼å…±äº«ï¼Œè°¢è°¢ã€‚

è½¬è½½æ–‡ç« è¯·åœ¨å¼€å¤´æ˜æ˜¾å¤„æ ‡æ˜è¯¥é¡µé¢åœ°å€ï¼Œå…¬ä¼—å·ç­‰å…¶å®ƒè½¬è½½è¯·è”ç³» [1246550576@qq.com](mailto:1246550576@qq.com)

### ğŸ“æ’ç‰ˆç”³æ˜

ç¬”è®°å†…å®¹æŒ‰ç…§ä¸€å®šæ ‡å‡†è¿›è¡Œæ’ç‰ˆï¼Œä»¥ä¿è¯å†…å®¹çš„å¯è¯»æ€§ã€‚

ä¸ä½¿ç”¨ `![]()` è¿™ç§æ–¹å¼æ¥å¼•ç”¨å›¾ç‰‡ï¼Œè€Œæ˜¯ç”¨ `<img>` æ ‡ç­¾ã€‚ä¸ºäº†èƒ½å¤Ÿæ§åˆ¶å›¾ç‰‡ä»¥åˆé€‚çš„å¤§å°æ˜¾ç¤ºï¼Œä½¿ç”¨ `<div align="center"> <img src=""/> </div>` è¾¾åˆ°å±…ä¸­çš„æ•ˆæœã€‚

æ’ç‰ˆç¾åŒ–å·¥å…·ï¼š[Typora-Purple](https://theme.typora.io/theme/Purple/)

